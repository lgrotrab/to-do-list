<%- include("partials/header.ejs") %>
<form action="<%=route%>" method="POST">
  <nav class="navbar navbar-expand-lg navbar-light bg-light px-5">
    <ul class="navbar-nav mr-auto list-group-horizontal w-100">
      <li class="nav-item active pe-2">
        <button class="btn btn-secondary-outline" type="submit" name="route" value="pessoal">Pessoal</button>
      </li>
      <li class="nav-item">
        <button class="btn btn-secondary-outline" type="submit" name="route" value="trabalho">Trabalho</button>
      </li>
    </ul>
  </nav>
  <div class = "page-header px-5 mt-5">
    <% if(route === "/"){ %>
      <h4>
        Lista de afazeres pessoais 
      </h4>
    <% } else{ %>
      <h4>
        Lista de afazeres de trabalho 
      </h4>
      <% } %>
  </div>
  <div class="input-group mt-5 mb-4 px-5">
    <input type="text" class="form-control" name="add" placeholder="Adicionar novos itens">
    <div class="input-group-append">
      <button class="btn btn-primary" type="submit" name="added" value="true">Adicionar</button>
    </div>
  </div>

  <% if(locals.tasks) {
    for(let i=0; i<tasks.length; i++) { %>
      <div class="d-flex justify-content-center">
        <div class="card mt-2 w-100 mx-5">
          <div class="card-body align-items-center d-flex">
            <div class="form-check flex-grow-1">
              <% if(tasks[i].checked){ %>
                <input class="form-check-input" type="checkbox" value="<%=i%>" name="checkbox_position" checked>
                <label class="form-check-label px-2 checked" >
                  <%= tasks[i].task %>
                </label>
              <% }else{ %>
                <input class="form-check-input" type="checkbox" value="<%=i%>" name="checkbox_position" >
                <label class="form-check-label px-2" >
                  <%= tasks[i].task %>
                </label>
              <% } %>
            </div>
            <button type="submit" class="btn btn-danger" name="delete" value="<%=tasks[i].task%>"><i class="fa fa-trash" ></i></button>
          </div>
        </div>
      </div>
  <% } }%>
</form>
<%- include("partials/footer.ejs", {tasks: tasks}) %>